webpackJsonp([4],{yvfB:function(n,l,t){"use strict";Object.defineProperty(l,"__esModule",{value:!0});var e=t("LMZF"),u=function(){},i=t("Un6q"),o=t("0nO6"),c=t("UHIZ"),a=t("WiWd"),r=t("ADVA"),s="GET_TOPIC_LIST",p="SET_TOPIC_LIST",d="TRY_ADD_TOPIC",m="ADD_TOPIC",_="TRY_DELETE_TOPIC",y="DELETE_TOPIC",f="GET_LIKED_TOPIC_LIST",h="SET_LIKED_TOPIC_LIST",b="LIKE_TOPIC",g="TOPIC_CLEAR",C=function(){return function(n){this.payload=n,this.type=s}}(),T=function(){return function(n){this.payload=n,this.type=d}}(),I=function(){return function(n){this.payload=n,this.type=b}}(),O=function(){return function(){this.type=g}}(),v="GET_TOPIC_COMMENTS",j="SET_TOPIC_COMMENTS",k="TRY_ADD_TOPIC_COMMENT",E="ADD_TOPIC_COMMENT",L="TRY_DELETE_TOPIC_COMMENT",w="DELETE_TOPIC_COMMENT",P="TOGGLE_REPLY_FORM",M="GET_TOPIC_REPLIES",U="SET_TOPIC_REPLIES",R="TRY_ADD_TOPIC_REPLY",x="TRY_DELETE_TOPIC_REPLY",S="DELETE_TOPIC_REPLY",D="GET_COMMENT_FEELINGS",F="SET_COMMENT_FEELINGS",N="TRY_ADD_COMMENT_FEELING",A="ADD_COMMENT_FEELING",$=function(){return function(n){this.payload=n,this.type=v}}(),q=function(){return function(n){this.payload=n,this.type=k}}(),K=function(){return function(n){this.payload=n,this.type=L}}(),G=function(){return function(n){this.payload=n,this.type=N}}(),Z=function(){return function(n){this.payload=n,this.type=P}}(),Y=function(){return function(n){this.payload=n,this.type=M}}(),B=function(){return function(n){this.payload=n,this.type=R}}(),V=function(){return function(n){this.payload=n,this.type=x}}(),W=function(){function n(n,l,t){this.route=n,this.alertify=l,this.store=t}return n.prototype.ngOnInit=function(){var n=this;this.dailyTopicState=this.store.select("dailytopic"),this.route.params.subscribe(function(l){n.userId=l.userId,n.store.dispatch(new C(n.userId))})},n.prototype.ngOnDestroy=function(){this.store.dispatch(new O)},n.prototype.sendLike=function(n){console.log(this.userId),this.store.dispatch(new I({supportAppUserId:this.userId,dailyTopicId:n}))},n.prototype.onCreate=function(n){this.userId&&(this.store.dispatch(new T({title:n.value.newTopic,userId:this.userId})),n.reset())},n}(),X=e._2({encapsulation:0,styles:[[".col-like[_ngcontent-%COMP%]{width:100px}.col-button[_ngcontent-%COMP%]{width:50px}.liked.badge[_ngcontent-%COMP%]{font-weight:700;color:#099de2}table[_ngcontent-%COMP%]{overflow:visible}button[_ngcontent-%COMP%]:disabled, button[disabled][_ngcontent-%COMP%]{opacity:.9;color:#01a9f7}"]],data:{}});function z(n){return e._28(0,[(n()(),e._4(0,0,null,null,20,"tr",[],null,null,null,null,null)),(n()(),e._26(-1,null,["\n          "])),(n()(),e._4(2,0,null,null,1,"td",[],null,null,null,null,null)),(n()(),e._26(3,null,["",""])),(n()(),e._26(-1,null,["\n          "])),(n()(),e._4(5,0,null,null,1,"td",[],null,null,null,null,null)),(n()(),e._26(6,null,["",""])),(n()(),e._26(-1,null,["\n          "])),(n()(),e._4(8,0,null,null,11,"td",[],null,null,null,null,null)),(n()(),e._26(-1,null,["\n            "])),(n()(),e._4(10,0,null,null,8,"button",[["class","btn btn-primary btn-xs"]],[[8,"disabled",0]],[[null,"click"]],function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.sendLike(n.context.$implicit.id)&&e),e},null,null)),e._3(11,278528,null,0,i.j,[e.q,e.r,e.k,e.C],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),e._20(12,{liked:0}),(n()(),e._26(-1,null,["\n              "])),(n()(),e._4(14,0,null,null,0,"i",[["class","fa fa-thumbs-up"],["title","\u826f\u3044\u306d!"]],null,null,null,null,null)),(n()(),e._26(-1,null,["\n              "])),(n()(),e._4(16,0,null,null,1,"span",[["class","badge"]],null,null,null,null,null)),(n()(),e._26(17,null,["",""])),(n()(),e._26(-1,null,["\n            "])),(n()(),e._26(-1,null,["\n          "])),(n()(),e._26(-1,null,["\n        "]))],function(n,l){n(l,11,0,"btn btn-primary btn-xs",n(l,12,0,l.context.$implicit.isLiked))},function(n,l){n(l,3,0,l.context.index+1),n(l,6,0,l.context.$implicit.title),n(l,10,0,l.context.$implicit.isLiked),n(l,17,0,l.context.$implicit.likedCount)})}function H(n){return e._28(0,[(n()(),e._4(0,0,null,null,25,"div",[],null,null,null,null,null)),(n()(),e._26(-1,null,["\n    "])),(n()(),e._4(2,0,null,null,22,"table",[["class","table table-striped"]],null,null,null,null,null)),(n()(),e._26(-1,null,["\n      "])),(n()(),e._4(4,0,null,null,12,"thead",[],null,null,null,null,null)),(n()(),e._26(-1,null,["\n        "])),(n()(),e._4(6,0,null,null,9,"tr",[],null,null,null,null,null)),(n()(),e._26(-1,null,["\n          "])),(n()(),e._4(8,0,null,null,0,"th",[],null,null,null,null,null)),(n()(),e._26(-1,null,["\n          "])),(n()(),e._4(10,0,null,null,1,"th",[["class","col-topic"]],null,null,null,null,null)),(n()(),e._26(-1,null,["\u30c8\u30d4\u30c3\u30af"])),(n()(),e._26(-1,null,["\n          "])),(n()(),e._4(13,0,null,null,1,"th",[["class","col-like"]],null,null,null,null,null)),(n()(),e._26(-1,null,["\u30b5\u30dd\u30fc\u30c8\u6570"])),(n()(),e._26(-1,null,["\n        "])),(n()(),e._26(-1,null,["\n      "])),(n()(),e._26(-1,null,["\n      "])),(n()(),e._4(18,0,null,null,5,"tbody",[],null,null,null,null,null)),(n()(),e._26(-1,null,["\n        "])),(n()(),e.Z(16777216,null,null,2,null,z)),e._3(21,802816,null,0,i.k,[e.N,e.K,e.q],{ngForOf:[0,"ngForOf"]},null),e._19(131072,i.b,[e.h]),(n()(),e._26(-1,null,["\n      "])),(n()(),e._26(-1,null,["\n    "])),(n()(),e._26(-1,null,["\n  "]))],function(n,l){var t=l.component;n(l,21,0,e._27(l,21,0,e._16(l,22).transform(t.dailyTopicState)).topicList)},null)}function J(n){return e._28(0,[(n()(),e._4(0,0,null,null,37,"div",[["class","container"]],null,null,null,null,null)),(n()(),e._26(-1,null,["\n  "])),(n()(),e._4(2,0,null,null,1,"h2",[],null,null,null,null,null)),(n()(),e._26(-1,null,["\u73fe\u5728\u306e\u30c8\u30d4\u30c3\u30af\u30e9\u30f3\u30ad\u30f3\u30b0"])),(n()(),e._26(-1,null,["\n  "])),(n()(),e._4(5,0,null,null,1,"p",[],null,null,null,null,null)),(n()(),e._26(-1,null,["*\u30e9\u30f3\u30ad\u30f3\u30b01\u4f4d\u306e\u7269\u304c\u660e\u65e5\u306e\u30c8\u30d4\u30c3\u30af\u306b\u306a\u308a\u307e\u3059"])),(n()(),e._26(-1,null,["\n  "])),(n()(),e.Z(16777216,null,null,2,null,H)),e._3(9,16384,null,0,i.l,[e.N,e.K],{ngIf:[0,"ngIf"]},null),e._19(131072,i.b,[e.h]),(n()(),e._26(-1,null,["\n  "])),(n()(),e._4(12,0,null,null,24,"form",[["id","newTopicForm"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],function(n,l,t){var u=!0,i=n.component;return"submit"===l&&(u=!1!==e._16(n,14).onSubmit(t)&&u),"reset"===l&&(u=!1!==e._16(n,14).onReset()&&u),"ngSubmit"===l&&(u=!1!==i.onCreate(e._16(n,14))&&u),u},null,null)),e._3(13,16384,null,0,o.w,[],null,null),e._3(14,4210688,[["newTopicForm",4]],0,o.n,[[8,null],[8,null]],null,{ngSubmit:"ngSubmit"}),e._22(2048,null,o.b,null,[o.n]),e._3(16,16384,null,0,o.m,[o.b],null,null),(n()(),e._26(-1,null,["\n    "])),(n()(),e._4(18,0,null,null,14,"div",[["class","form-group"]],null,null,null,null,null)),(n()(),e._26(-1,null,["\n      "])),(n()(),e._4(20,0,null,null,1,"label",[["class","h4"],["for","newTopic"]],null,null,null,null,null)),(n()(),e._26(-1,null,["\u65b0\u3057\u3044\u30c8\u30d4\u30c3\u30af\u5019\u88dc\u3092\u63d0\u6848"])),(n()(),e._26(-1,null,["\n      "])),(n()(),e._4(23,0,[["newTopic",1]],null,8,"input",[["class","form-control"],["id","newTopic"],["maxlength","100"],["name","newTopic"],["ngModel",""],["required",""],["type","text"]],[[1,"required",0],[1,"maxlength",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(n,l,t){var u=!0;return"input"===l&&(u=!1!==e._16(n,24)._handleInput(t.target.value)&&u),"blur"===l&&(u=!1!==e._16(n,24).onTouched()&&u),"compositionstart"===l&&(u=!1!==e._16(n,24)._compositionStart()&&u),"compositionend"===l&&(u=!1!==e._16(n,24)._compositionEnd(t.target.value)&&u),u},null,null)),e._3(24,16384,null,0,o.c,[e.C,e.k,[2,o.a]],null,null),e._3(25,16384,null,0,o.s,[],{required:[0,"required"]},null),e._3(26,540672,null,0,o.h,[],{maxlength:[0,"maxlength"]},null),e._22(1024,null,o.i,function(n,l){return[n,l]},[o.s,o.h]),e._22(1024,null,o.j,function(n){return[n]},[o.c]),e._3(29,671744,null,0,o.o,[[2,o.b],[2,o.i],[8,null],[2,o.j]],{name:[0,"name"],model:[1,"model"]},null),e._22(2048,null,o.k,null,[o.o]),e._3(31,16384,null,0,o.l,[o.k],null,null),(n()(),e._26(-1,null,["\n    "])),(n()(),e._26(-1,null,["\n    "])),(n()(),e._4(34,0,null,null,1,"button",[["class","btn btn-success"],["type","submit"]],[[8,"disabled",0]],null,null,null,null)),(n()(),e._26(-1,null,["\u5019\u88dc\u306b\u8ffd\u52a0"])),(n()(),e._26(-1,null,["\n  "])),(n()(),e._26(-1,null,["\n"]))],function(n,l){var t=l.component;n(l,9,0,e._27(l,9,0,e._16(l,10).transform(t.dailyTopicState)).topicList),n(l,25,0,""),n(l,26,0,"100"),n(l,29,0,"newTopic","")},function(n,l){n(l,12,0,e._16(l,16).ngClassUntouched,e._16(l,16).ngClassTouched,e._16(l,16).ngClassPristine,e._16(l,16).ngClassDirty,e._16(l,16).ngClassValid,e._16(l,16).ngClassInvalid,e._16(l,16).ngClassPending),n(l,23,0,e._16(l,25).required?"":null,e._16(l,26).maxlength?e._16(l,26).maxlength:null,e._16(l,31).ngClassUntouched,e._16(l,31).ngClassTouched,e._16(l,31).ngClassPristine,e._16(l,31).ngClassDirty,e._16(l,31).ngClassValid,e._16(l,31).ngClassInvalid,e._16(l,31).ngClassPending),n(l,34,0,!e._16(l,14).valid||e._16(l,14).pristine)})}var Q=e._0("app-topic-list",W,function(n){return e._28(0,[(n()(),e._4(0,0,null,null,1,"app-topic-list",[],null,null,null,J,X)),e._3(1,245760,null,0,W,[c.a,a.a,r.n],null,null)],function(n,l){n(l,1,0)},null)},{},{},[]),nn=t("WIDg"),ln=t("+BUh"),tn=function(){function n(n,l){this.store=n,this.alertify=l}return n.prototype.ngOnInit=function(){},n.prototype.sendLike=function(n){this.memberId&&this.store.dispatch(new G({memberId:this.memberId,commentId:this.topicComment.id,feeling:this.commentFeelEnum.Like}))},n.prototype.toggleReplyForm=function(n){n.displayReplies||this.store.dispatch(new Y({commentId:n.id})),this.store.dispatch(new Z({commentId:n.id}))},n.prototype.onDelete=function(n){var l=this;this.alertify.confirm("\u672c\u5f53\u306b\u3053\u306e\u30b3\u30e1\u30f3\u30c8("+n.comment+")\u3092\u524a\u9664\u3057\u307e\u3059\u304b\uff1f",function(){l.store.dispatch(new K(n.id))})},n}(),en=e._2({encapsulation:0,styles:[["button[_ngcontent-%COMP%]:disabled, button[disabled][_ngcontent-%COMP%]{opacity:.9;color:#01a9f7}"]],data:{}});function un(n){return e._28(0,[(n()(),e._4(0,0,null,null,1,"a",[["class","btn btn-danger btn-xs"]],null,[[null,"click"]],function(n,l,t){var e=!0,u=n.component;return"click"===l&&(e=!1!==u.onDelete(u.topicComment)&&e),e},null,null)),(n()(),e._26(-1,null,["\u524a\u9664"]))],null,null)}function on(n){return e._28(0,[(n()(),e._4(0,0,null,null,41,"div",[["class","commentContainer"]],null,null,null,null,null)),(n()(),e._26(-1,null,["\n  "])),(n()(),e._4(2,0,null,null,5,"div",[["class","commentImage"]],null,null,null,null,null)),(n()(),e._26(-1,null,["\n    "])),(n()(),e._4(4,0,null,null,2,"img",[["class","img-circle"],["style","cursor: pointer"]],[[8,"src",4],[8,"alt",0],[8,"title",0]],[[null,"click"]],function(n,l,t){var u=!0;return"click"===l&&(u=!1!==e._16(n,5).onClick()&&u),u},null,null)),e._3(5,16384,null,0,c.n,[c.m,c.a,[8,null],e.C,e.k],{routerLink:[0,"routerLink"]},null),e._18(6,2),(n()(),e._26(-1,null,["\n  "])),(n()(),e._26(-1,null,["\n  "])),(n()(),e._4(9,0,null,null,9,"div",[["class","comment"]],null,null,null,null,null)),(n()(),e._26(-1,null,["\n    "])),(n()(),e._4(11,0,null,null,6,"div",[["class","commentBaloon"]],null,null,null,null,null)),(n()(),e._26(-1,null,["\n      "])),(n()(),e._4(13,0,null,null,3,"p",[],null,null,null,null,null)),(n()(),e._4(14,0,null,null,1,"b",[],null,null,null,null,null)),(n()(),e._26(15,null,["",""])),(n()(),e._26(16,null,[": ",""])),(n()(),e._26(-1,null,["\n    "])),(n()(),e._26(-1,null,["\n  "])),(n()(),e._26(-1,null,["\n  "])),(n()(),e._4(20,0,null,null,20,"div",[["class","commentTools"]],null,null,null,null,null)),(n()(),e._26(-1,null,["\n    "])),(n()(),e._4(22,0,null,null,6,"button",[["class","btn btn-primary btn-xs"]],[[8,"disabled",0]],[[null,"click"]],function(n,l,t){var e=!0,u=n.component;return"click"===l&&(e=!1!==u.sendLike(u.topicComment.id)&&e),e},null,null)),(n()(),e._26(-1,null,["\n      "])),(n()(),e._4(24,0,null,null,0,"i",[["class","fa fa-thumbs-up"],["title","\u826f\u3044\u306d"]],null,null,null,null,null)),(n()(),e._26(-1,null,["\n      "])),(n()(),e._4(26,0,null,null,1,"span",[["class","badge"]],null,null,null,null,null)),(n()(),e._26(27,null,["",""])),(n()(),e._26(-1,null,["\n    "])),(n()(),e._4(29,0,null,null,0,"br",[],null,null,null,null,null)),(n()(),e._26(-1,null,["\n    "])),(n()(),e._26(-1,null,["\n    "])),(n()(),e._4(32,0,null,null,6,"button",[["class","btn btn-primary btn-xs"]],[[8,"disabled",0]],[[null,"click"]],function(n,l,t){var e=!0,u=n.component;return"click"===l&&(e=!1!==u.toggleReplyForm(u.topicComment)&&e),e},null,null)),(n()(),e._26(-1,null,["\n        "])),(n()(),e._4(34,0,null,null,0,"i",[["class","fa fa-comment"],["title","\u8fd4\u4fe1\u6570"]],null,null,null,null,null)),(n()(),e._26(-1,null,["\n        "])),(n()(),e._4(36,0,null,null,1,"span",[["class","badge"]],null,null,null,null,null)),(n()(),e._26(37,null,["",""])),(n()(),e._26(-1,null,["\n    "])),(n()(),e._26(-1,null,["\n    "])),(n()(),e._26(-1,null,["\n  "])),(n()(),e._26(-1,null,["\n"])),(n()(),e._26(-1,null,["\n"])),(n()(),e._4(43,0,null,null,0,"span",[["class","clearfix"]],null,null,null,null,null)),(n()(),e._26(-1,null,["\n"])),(n()(),e.Z(16777216,null,null,1,null,un)),e._3(46,16384,null,0,i.l,[e.N,e.K],{ngIf:[0,"ngIf"]},null)],function(n,l){var t=l.component;n(l,5,0,n(l,6,0,"/users/detail/",t.topicComment.appUserId)),n(l,46,0,t.topicComment.memberId==t.memberId)},function(n,l){var t=l.component;n(l,4,0,e._7(1,"",t.topicComment.mainPhotoUrl?t.topicComment.mainPhotoUrl:"assets/NoImage_Person.png",""),e._7(1,"",t.topicComment.displayName,""),e._7(1,"",t.topicComment.displayName,"")),n(l,15,0,t.topicComment.displayName),n(l,16,0,t.topicComment.comment),n(l,22,0,t.topicComment.reactionByUser||!t.memberId),n(l,27,0,t.topicComment.likedCount),n(l,32,0,!t.memberId),n(l,37,0,t.topicComment.replyCount)})}var cn=t("1Rk1"),an=t("gnbO"),rn=t("ibx0"),sn=function(){function n(n,l,t,e){this.route=n,this.alertify=l,this.globalService=t,this.store=e}return n.prototype.ngOnInit=function(){var n=this;this.appUser=this.route.snapshot.data.appUser,this.commentFeelingEnum=this.globalService.getFeelings(),this.loading=!0,this.dailyTopicState=this.store.select("dailytopic"),this.dailyTopicState.subscribe(function(l){n.loading=!1}),this.store.dispatch(new $(this.appUser?this.appUser.userProfileId:null)),this.globalService.getTodaysTopic().subscribe(function(l){n.todaysTopic=l},function(n){console.log("Error occured when getting todays topic")})},n.prototype.ngOnDestroy=function(){this.store.dispatch(new O)},n.prototype.submit=function(n){this.store.dispatch(new q({memberId:this.appUser.userProfileId,comment:n.value.comment,topicTitle:this.todaysTopic}))},n.prototype.onAddTopicCommentReply=function(n,l){this.appUser&&this.store.dispatch(new B({topicCommentId:n,memberId:this.appUser.userProfileId,reply:l}))},n.prototype.onDeleteTopicCommentReply=function(n){var l=this;this.alertify.confirm("\u672c\u5f53\u306b\u3053\u306e\u30b3\u30e1\u30f3\u30c8("+n.comment+")\u3092\u524a\u9664\u3057\u307e\u3059\u304b\uff1f",function(){l.store.dispatch(new V({topicReplyId:n.id,topicCommentId:n.ownerRecordId}))})},n}(),pn=e._2({encapsulation:0,styles:[[""]],data:{}});function dn(n){return e._28(0,[(n()(),e._4(0,0,null,null,3,"button",[["class","btn btn-primary"]],null,[[null,"click"]],function(n,l,t){var u=!0;return"click"===l&&(u=!1!==e._16(n,1).onClick()&&u),u},null,null)),e._3(1,16384,null,0,c.n,[c.m,c.a,[8,null],e.C,e.k],{routerLink:[0,"routerLink"]},null),e._18(2,1),(n()(),e._26(-1,null,["\u30ed\u30b0\u30a4\u30f3"]))],function(n,l){n(l,1,0,n(l,2,0,"/account/login"))},null)}function mn(n){return e._28(0,[(n()(),e._4(0,0,null,null,3,"a",[["class","btn btn-primary btn-sm"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(n,l,t){var u=!0;return"click"===l&&(u=!1!==e._16(n,1).onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)&&u),u},null,null)),e._3(1,671744,null,0,c.p,[c.m,c.a,i.i],{routerLink:[0,"routerLink"]},null),e._18(2,2),(n()(),e._26(-1,null,["\u660e\u65e5\u306e\u30c8\u30d4\u30c3\u30af\u306f\uff1f"]))],function(n,l){n(l,1,0,n(l,2,0,"/dailytopic/ranking/",l.component.appUser.id))},function(n,l){n(l,0,0,e._16(l,1).target,e._16(l,1).href)})}function _n(n){return e._28(0,[(n()(),e._4(0,0,null,null,1,"app-loading",[],null,null,null,nn.b,nn.a)),e._3(1,114688,null,0,ln.a,[],null,null)],function(n,l){n(l,1,0)},null)}function yn(n){return e._28(0,[(n()(),e._4(0,0,null,null,17,"div",[["class","form-group"]],null,null,null,null,null)),(n()(),e._26(-1,null,["\n      "])),(n()(),e._4(2,0,null,null,1,"label",[["class","control-label"],["for","title"]],null,null,null,null,null)),(n()(),e._26(-1,null,["\u4e00\u8a00\u3092\u8ffd\u52a0\u3059\u308b\uff081\u65e51\u56de\u306e\u307f, \u6700\u5927100\u6587\u5b57\uff09"])),(n()(),e._26(-1,null,["\n      "])),(n()(),e._4(5,0,null,null,8,"input",[["class","form-control"],["maxlength","100"],["name","comment"],["ngModel",""],["required",""],["type","text"]],[[1,"required",0],[1,"maxlength",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(n,l,t){var u=!0;return"input"===l&&(u=!1!==e._16(n,6)._handleInput(t.target.value)&&u),"blur"===l&&(u=!1!==e._16(n,6).onTouched()&&u),"compositionstart"===l&&(u=!1!==e._16(n,6)._compositionStart()&&u),"compositionend"===l&&(u=!1!==e._16(n,6)._compositionEnd(t.target.value)&&u),u},null,null)),e._3(6,16384,null,0,o.c,[e.C,e.k,[2,o.a]],null,null),e._3(7,16384,null,0,o.s,[],{required:[0,"required"]},null),e._3(8,540672,null,0,o.h,[],{maxlength:[0,"maxlength"]},null),e._22(1024,null,o.i,function(n,l){return[n,l]},[o.s,o.h]),e._22(1024,null,o.j,function(n){return[n]},[o.c]),e._3(11,671744,null,0,o.o,[[2,o.b],[2,o.i],[8,null],[2,o.j]],{name:[0,"name"],model:[1,"model"]},null),e._22(2048,null,o.k,null,[o.o]),e._3(13,16384,null,0,o.l,[o.k],null,null),(n()(),e._26(-1,null,["\n      "])),(n()(),e._4(15,0,null,null,1,"button",[["class","btn btn-primary"],["type","submit"]],[[8,"disabled",0]],null,null,null,null)),(n()(),e._26(-1,null,["\u4e00\u8a00\u8ffd\u52a0"])),(n()(),e._26(-1,null,["\n    "]))],function(n,l){n(l,7,0,""),n(l,8,0,"100"),n(l,11,0,"comment","")},function(n,l){n(l,5,0,e._16(l,7).required?"":null,e._16(l,8).maxlength?e._16(l,8).maxlength:null,e._16(l,13).ngClassUntouched,e._16(l,13).ngClassTouched,e._16(l,13).ngClassPristine,e._16(l,13).ngClassDirty,e._16(l,13).ngClassValid,e._16(l,13).ngClassInvalid,e._16(l,13).ngClassPending),n(l,15,0,!e._16(l.parent,2).valid)})}function fn(n){return e._28(0,[(n()(),e._4(0,0,null,null,8,"form",[["id","topicCommentForm"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],function(n,l,t){var u=!0,i=n.component;return"submit"===l&&(u=!1!==e._16(n,2).onSubmit(t)&&u),"reset"===l&&(u=!1!==e._16(n,2).onReset()&&u),"ngSubmit"===l&&(u=!1!==i.submit(e._16(n,2))&&u),u},null,null)),e._3(1,16384,null,0,o.w,[],null,null),e._3(2,4210688,[["topicCommentForm",4]],0,o.n,[[8,null],[8,null]],null,{ngSubmit:"ngSubmit"}),e._22(2048,null,o.b,null,[o.n]),e._3(4,16384,null,0,o.m,[o.b],null,null),(n()(),e._26(-1,null,["\n    "])),(n()(),e.Z(16777216,null,null,1,null,yn)),e._3(7,16384,null,0,i.l,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(n()(),e._26(-1,null,["\n  "]))],function(n,l){n(l,7,0,l.component.appUser)},function(n,l){n(l,0,0,e._16(l,4).ngClassUntouched,e._16(l,4).ngClassTouched,e._16(l,4).ngClassPristine,e._16(l,4).ngClassDirty,e._16(l,4).ngClassValid,e._16(l,4).ngClassInvalid,e._16(l,4).ngClassPending)})}function hn(n){return e._28(0,[(n()(),e._4(0,0,null,null,1,"app-topic-comment",[],null,null,null,on,en)),e._3(1,114688,null,0,tn,[r.n,a.a],{topicComment:[0,"topicComment"],memberId:[1,"memberId"],commentFeelEnum:[2,"commentFeelEnum"]},null)],function(n,l){var t=l.component;n(l,1,0,l.parent.context.$implicit,t.appUser?t.appUser.userProfileId:null,t.commentFeelingEnum)},null)}function bn(n){return e._28(0,[(n()(),e._4(0,0,null,null,1,"app-short-comment-form",[],null,[[null,"addShortComment"],[null,"deleteShortComment"]],function(n,l,t){var e=!0,u=n.component;return"addShortComment"===l&&(e=!1!==u.onAddTopicCommentReply(n.parent.context.$implicit.id,t)&&e),"deleteShortComment"===l&&(e=!1!==u.onDeleteTopicCommentReply(t)&&e),e},cn.b,cn.a)),e._3(1,114688,null,0,an.a,[],{shortComments:[0,"shortComments"],currentAppUserId:[1,"currentAppUserId"]},{addShortComment:"addShortComment",deleteShortComment:"deleteShortComment"})],function(n,l){n(l,1,0,l.parent.context.$implicit.topicReplies,l.component.appUser.id)},null)}function gn(n){return e._28(0,[(n()(),e._4(0,0,null,null,9,"div",[],null,null,null,null,null)),(n()(),e._26(-1,null,["\n    "])),(n()(),e.Z(16777216,null,null,2,null,hn)),e._3(3,16384,null,0,i.l,[e.N,e.K],{ngIf:[0,"ngIf"]},null),e._19(131072,i.b,[e.h]),(n()(),e._26(-1,null,["\n    "])),(n()(),e._26(-1,null,["\n    "])),(n()(),e.Z(16777216,null,null,1,null,bn)),e._3(8,16384,null,0,i.l,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(n()(),e._26(-1,null,["\n  "]))],function(n,l){var t=l.component;n(l,3,0,e._27(l,3,0,e._16(l,4).transform(t.dailyTopicState)).commentFeelings),n(l,8,0,l.context.$implicit.displayReplies&&t.appUser)},null)}function Cn(n){return e._28(0,[(n()(),e._4(0,0,null,null,21,"div",[["class","container"]],null,null,null,null,null)),(n()(),e._26(-1,null,["\n  "])),(n()(),e._4(2,0,null,null,1,"h2",[],null,null,null,null,null)),(n()(),e._26(3,null,["\u672c\u65e5\u306e\u30c8\u30d4\u30c3\u30af - "," "])),(n()(),e._26(-1,null,["\n  "])),(n()(),e.Z(16777216,null,null,1,null,dn)),e._3(6,16384,null,0,i.l,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(n()(),e._26(-1,null,["\n  "])),(n()(),e.Z(16777216,null,null,1,null,mn)),e._3(9,16384,null,0,i.l,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(n()(),e._26(-1,null,["\n  "])),(n()(),e.Z(16777216,null,null,1,null,_n)),e._3(12,16384,null,0,i.l,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(n()(),e._26(-1,null,["\n  "])),(n()(),e.Z(16777216,null,null,2,null,fn)),e._3(15,16384,null,0,i.l,[e.N,e.K],{ngIf:[0,"ngIf"]},null),e._19(131072,i.b,[e.h]),(n()(),e._26(-1,null,["\n  "])),(n()(),e.Z(16777216,null,null,2,null,gn)),e._3(19,802816,null,0,i.k,[e.N,e.K,e.q],{ngForOf:[0,"ngForOf"]},null),e._19(131072,i.b,[e.h]),(n()(),e._26(-1,null,["\n"]))],function(n,l){var t=l.component;n(l,6,0,!t.appUser),n(l,9,0,t.appUser),n(l,12,0,t.loading),n(l,15,0,!e._27(l,15,0,e._16(l,16).transform(t.dailyTopicState)).todaysComment),n(l,19,0,e._27(l,19,0,e._16(l,20).transform(t.dailyTopicState)).topicComments)},function(n,l){n(l,3,0,l.component.todaysTopic)})}var Tn=e._0("app-topic-comment-list",sn,function(n){return e._28(0,[(n()(),e._4(0,0,null,null,1,"app-topic-comment-list",[],null,null,null,Cn,pn)),e._3(1,245760,null,0,sn,[c.a,a.a,rn.a,r.n],null,null)],function(n,l){n(l,1,0)},null)},{},{},[]),In=t("AP4T"),On=t("p5Ee"),vn=t("9iV4"),jn=function(){function n(n,l,t){this.router=n,this.alertify=l,this.httpClient=t,this.baseUrl=On.a.apiUrl}return n.prototype.resolve=function(n){var l=this;return this.httpClient.get(this.baseUrl+"dailytopic?userId="+n.params.userId).catch(function(n){return l.alertify.error("Problem getting member data"),l.router.navigate(["/home"]),In.a.of(null)})},n}(),kn=t("/bUx"),En=t("T2Au"),Ln=t("ruYT"),wn=function(){},Pn=this&&this.__assign||Object.assign||function(n){for(var l,t=1,e=arguments.length;t<e;t++)for(var u in l=arguments[t])Object.prototype.hasOwnProperty.call(l,u)&&(n[u]=l[u]);return n},Mn={topicList:null,likedTopicList:null,topicComments:null,commentFeelings:null,topicReplies:null,todaysComment:null};function Un(n,l){void 0===n&&(n=Mn);var t=null,e=null;switch(l.type){case g:return Pn({},n,{topicList:null,topicComments:null,commentFeelings:null,topicReplies:null,todaysComment:null,likedTopicList:null});case p:return Pn({},n,{topicList:l.payload});case h:return t=n.topicList.slice(),l.payload.forEach(function(n){var l=t.findIndex(function(l){return l.id==n});l>=0&&(t[l].isLiked=!0)}),Pn({},n,{topicList:t,likedTopicList:l.payload});case m:return Pn({},n,{topicList:n.topicList.concat([l.payload])});case y:var u=(t=n.topicList.slice()).findIndex(function(n){return n.id==l.payload});return t.splice(u,1),Pn({},n,{topicList:t});case b:return u=(t=n.topicList.slice()).findIndex(function(n){return n.id==l.payload.dailyTopicId}),t[u].isLiked=!0,t[u].likedCount++,Pn({},n,{topicList:t,likedTopicList:n.likedTopicList.concat([l.payload.dailyTopicId])});case j:var i=l.payload.comments.find(function(n){return n.memberId==l.payload.memberId});return Pn({},n,{topicComments:l.payload.comments,todaysComment:i?i.id:null});case E:var o=l.payload;return o.replyCount=0,o.likedCount=0,Pn({},n,{topicComments:[o].concat(n.topicComments),todaysComment:o.id});case w:return u=(e=n.topicComments.slice()).findIndex(function(n){return n.id==l.payload}),e.splice(u,1),Pn({},n,{topicComments:e,todaysComment:n.todaysComment==l.payload?null:n.todaysComment});case F:return e=n.topicComments.slice(),l.payload.forEach(function(n){var l=e.findIndex(function(l){return l.id==n.commentId});e[l].reactionByUser=n.feeling}),Pn({},n,{commentFeelings:l.payload,topicComments:e});case A:return u=(e=n.topicComments.slice()).findIndex(function(n){return n.id==l.payload.commentId}),e[u].reactionByUser=l.payload.feeling,e[u].likedCount++,Pn({},n,{commentFeelings:n.commentFeelings.concat([l.payload]),topicComments:e});case P:return u=(e=n.topicComments.slice()).findIndex(function(n){return n.id==l.payload.commentId}),e[u].displayReplies=!e[u].displayReplies,Pn({},n,{topicComments:e});case U:return u=(e=n.topicComments.slice()).findIndex(function(n){return n.id==l.payload.commentId}),e[u].topicReplies=l.payload.topicReplies,e[u].replyCount=l.payload.topicReplies.length,Pn({},n,{topicComments:e});case S:u=(e=n.topicComments.slice()).findIndex(function(n){return n.id==l.payload.topicCommentId});var c=e[u].topicReplies,a=c.findIndex(function(n){return n.id==l.payload.id});return c.splice(a,1),e[u].topicReplies=c,e[u].replyCount--,Pn({},n,{topicComments:e});default:return n}}var Rn=t("6Xbx"),xn=t("Tl+Y"),Sn=t("iLLE"),Dn=t("GZB0"),Fn=function(){function n(n,l,t){var e=this;this.actions$=n,this.httpClient=l,this.alertify=t,this.baseUrl=On.a.apiUrl,this.getTopicList=this.actions$.ofType(s).map(function(n){return n.payload}).switchMap(function(n){return e.httpClient.get(e.baseUrl+"dailytopic").mergeMap(function(l){return[{type:p,payload:l},{type:f,payload:n}]}).catch(function(n){return Object(Dn.a)({type:Sn.a,payload:n})})}),this.getLikedTopicList=this.actions$.ofType(f).map(function(n){return n.payload}).switchMap(function(n){return e.httpClient.get(e.baseUrl+"topiclike/"+n).map(function(n){return{type:h,payload:n}}).catch(function(n){return Object(Dn.a)({type:Sn.a,payload:n})})}),this.tryAddTopic=this.actions$.ofType(d).map(function(n){return n.payload}).switchMap(function(n){return e.httpClient.post(e.baseUrl+"dailytopic",n,{headers:(new vn.h).set("Content-Type","application/json")}).map(function(n){return n.likedCount=0,n.isLiked=!1,{type:m,payload:n}}).catch(function(n){return Object(Dn.a)({type:Sn.a,payload:n})})}),this.tryDeleteTopic=this.actions$.ofType(_).map(function(n){return n.payload}).switchMap(function(n){return e.httpClient.delete(e.baseUrl+"dailytopic?userId="+n.userId+"&recordId="+n.id).map(function(){return{type:y,payload:n.id}}).catch(function(n){return Object(Dn.a)({type:Sn.a,payload:n})})}),this.likeTopic=this.actions$.ofType(b).map(function(n){return n.payload}).switchMap(function(n){return e.httpClient.post(e.baseUrl+"topiclike",n,{headers:(new vn.h).set("Content-Type","application/json")}).map(function(){return{type:Sn.k,payload:null}}).catch(function(n){return Object(Dn.a)({type:Sn.a,payload:n})})}),this.getTopicComments=this.actions$.ofType(v).map(function(n){return n.payload}).switchMap(function(n){return e.httpClient.get(e.baseUrl+"dailytopiccomment/list").mergeMap(function(l){return[{type:j,payload:{comments:l,memberId:n}},{type:D,payload:n}]}).catch(function(n){return Object(Dn.a)({type:Sn.a,payload:n})})}),this.tryAddComment=this.actions$.ofType(k).map(function(n){return n.payload}).switchMap(function(n){return console.log(n),e.httpClient.post(e.baseUrl+"dailytopiccomment",n,{headers:(new vn.h).set("Content-Type","application/json")}).mergeMap(function(n){return[{type:E,payload:n},{type:Sn.k,payload:"\u30c8\u30d4\u30c3\u30af\u30b3\u30e1\u30f3\u30c8\u3092\u6295\u7a3f\u3057\u307e\u3057\u305f"}]}).catch(function(n){return Object(Dn.a)({type:Sn.a,payload:n})})}),this.tryDeleteTopicComment=this.actions$.ofType(L).map(function(n){return n.payload}).switchMap(function(n){return e.httpClient.delete(e.baseUrl+"dailytopiccomment/"+n).mergeMap(function(){return[{type:w,payload:n},{type:Sn.k,payload:"\u524a\u9664\u3057\u307e\u3057\u305f"}]}).catch(function(n){return Object(Dn.a)({type:Sn.a,payload:n})})}),this.getCommentFeelings=this.actions$.ofType(D).map(function(n){return n.payload}).switchMap(function(n){return n?e.httpClient.get(e.baseUrl+"topiccommentfeel/"+n).map(function(n){return{type:F,payload:n}}).catch(function(n){return Object(Dn.a)({type:Sn.a,payload:n})}):Object(Dn.a)({type:F,payload:[]})}),this.tryAddCommentFeeling=this.actions$.ofType(N).map(function(n){return n.payload}).switchMap(function(n){return e.httpClient.post(e.baseUrl+"topiccommentfeel",n,{headers:(new vn.h).set("Content-Type","application/json")}).map(function(n){return{type:A,payload:n}}).catch(function(n){return Object(Dn.a)({type:Sn.a,payload:n})})}),this.getTopicReplies=this.actions$.ofType(M).map(function(n){return n.payload.commentId}).switchMap(function(n){return e.httpClient.get(e.baseUrl+"dailytopicreply/topic/"+n).map(function(l){return{type:U,payload:{commentId:n,topicReplies:l}}}).catch(function(n){return Object(Dn.a)({type:Sn.a,payload:n})})}),this.tryAddTopicReply=this.actions$.ofType(R).map(function(n){return n.payload}).switchMap(function(n){return e.httpClient.post(e.baseUrl+"dailytopicreply",n,{headers:(new vn.h).set("Content-Type","application/json")}).mergeMap(function(){return[{type:M,payload:{commentId:n.topicCommentId}},{type:Sn.k,payload:"\u30b3\u30e1\u30f3\u30c8\u3092\u9001\u4fe1\u3057\u307e\u3057\u305f"}]}).catch(function(n){return Object(Dn.a)({type:Sn.a,payload:n})})}),this.tryDeleteTopicReply=this.actions$.ofType(x).map(function(n){return n.payload}).switchMap(function(n){return e.httpClient.delete(e.baseUrl+"dailytopicreply/"+n.topicReplyId).mergeMap(function(){return[{type:M,payload:{commentId:n.topicCommentId}},{type:Sn.k,payload:"\u524a\u9664\u3057\u307e\u3057\u305f"}]}).catch(function(n){return Object(Dn.a)({type:Sn.a,payload:n})})})}return Object(Rn.b)([Object(xn.b)(),Object(Rn.d)("design:type",Object)],n.prototype,"getTopicList",void 0),Object(Rn.b)([Object(xn.b)(),Object(Rn.d)("design:type",Object)],n.prototype,"getLikedTopicList",void 0),Object(Rn.b)([Object(xn.b)(),Object(Rn.d)("design:type",Object)],n.prototype,"tryAddTopic",void 0),Object(Rn.b)([Object(xn.b)(),Object(Rn.d)("design:type",Object)],n.prototype,"tryDeleteTopic",void 0),Object(Rn.b)([Object(xn.b)(),Object(Rn.d)("design:type",Object)],n.prototype,"likeTopic",void 0),Object(Rn.b)([Object(xn.b)(),Object(Rn.d)("design:type",Object)],n.prototype,"getTopicComments",void 0),Object(Rn.b)([Object(xn.b)(),Object(Rn.d)("design:type",Object)],n.prototype,"tryAddComment",void 0),Object(Rn.b)([Object(xn.b)(),Object(Rn.d)("design:type",Object)],n.prototype,"tryDeleteTopicComment",void 0),Object(Rn.b)([Object(xn.b)(),Object(Rn.d)("design:type",Object)],n.prototype,"getCommentFeelings",void 0),Object(Rn.b)([Object(xn.b)(),Object(Rn.d)("design:type",Object)],n.prototype,"tryAddCommentFeeling",void 0),Object(Rn.b)([Object(xn.b)(),Object(Rn.d)("design:type",Object)],n.prototype,"getTopicReplies",void 0),Object(Rn.b)([Object(xn.b)(),Object(Rn.d)("design:type",Object)],n.prototype,"tryAddTopicReply",void 0),Object(Rn.b)([Object(xn.b)(),Object(Rn.d)("design:type",Object)],n.prototype,"tryDeleteTopicReply",void 0),n}();t.d(l,"DailyTopicModuleNgFactory",function(){return Nn});var Nn=e._1(u,[],function(n){return e._12([e._13(512,e.j,e.X,[[8,[Q,Tn]],[3,e.j],e.v]),e._13(4608,i.n,i.m,[e.s,[2,i.u]]),e._13(4608,o.x,o.x,[]),e._13(4608,jn,jn,[c.m,a.a,vn.c]),e._13(512,i.c,i.c,[]),e._13(512,o.v,o.v,[]),e._13(512,o.g,o.g,[]),e._13(512,kn.a,kn.a,[]),e._13(512,c.q,c.q,[[2,c.w],[2,c.m]]),e._13(512,En.a,En.a,[]),e._13(512,wn,wn,[]),e._13(1024,r.j,function(){return[{key:"dailytopic",reducerFactory:r.z,metaReducers:[],initialState:void 0}]},[]),e._13(1024,r.q,function(){return[Un]},[]),e._13(1024,r.r,function(n){return[n]},[r.q]),e._13(1024,r.b,function(n,l,t){return[r.w(n,l,t)]},[e.p,r.q,r.r]),e._13(131584,r.o,r.o,[r.j,r.b,r.g,r.p]),e._13(512,Fn,Fn,[xn.a,vn.c,a.a]),e._13(1024,xn.h,function(n){return[xn.d(n)]},[Fn]),e._13(512,xn.f,xn.f,[xn.e,xn.h,[2,r.p],[2,r.o]]),e._13(512,u,u,[]),e._13(1024,c.k,function(){return[[{path:"ranking/:userId",runGuardsAndResolvers:"always",component:W},{path:"",runGuardsAndResolvers:"always",component:sn,resolve:{appUser:Ln.a}}]]},[])])})}});